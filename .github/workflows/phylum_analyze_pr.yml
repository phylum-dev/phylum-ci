# This is a workflow for analyzing dependency lock files
# in this repository with Phylum during pull requests.
---
name: Phylum_analyze
on: pull_request
jobs:
  Analyze_PR_with_Phylum:
    name: Analyze PR with phylum
    permissions:            # Ensure least privilege of actions
      contents: read        # For actions/checkout
      pull-requests: write  # For phylum-dev/phylum-analyze-pr-action
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the repo
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Analyze poetry.lock file
        uses: phylum-dev/phylum-analyze-pr-action@v2
        with:
          phylum_token: ${{ secrets.PHYLUM_TOKEN }}
